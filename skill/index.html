<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SkillShareboard</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <header class="main-header">
    <div class="header-content">
      <h1>SkillShareboard</h1>
      <p class="subtitle">Connect, share, and discover skills in your community!</p>
      <nav>
        <a href="profile.html">Profile</a>
        <a href="post-service.html">Post Service</a>
        <a href="requests.html">Requests</a>
        <a href="chat.html">Chat</a>
        <a href="#" onclick="logout()">Logout</a>
      </nav>
    </div>
  </header>
  <main>
    <section class="description">
      <h2>Welcome to SkillShareboard</h2>
      <p>
        SkillShareboard is your platform to offer and request services, connect with talented people, and grow together. Browse available services below or post your own to get started!
        <br><h3 style="color: brown;">(NB: Still a work in progress - more features coming soon!
        Please report any bugs or issues to the developer[ishtampole ond.].)</h3>
      </p>
    </section>
    <section>
      <h2>Available Services</h2>
      <div id="services-list"></div>
    </section>
  </main>
  <script src="js/script.js"></script>
  <script type="module">
    import { getAllServices } from './js/auth.js';

    async function loadServices() {
      const services = await getAllServices();
      const list = document.getElementById('services-list');
      list.innerHTML = '';
      if (!services || services.length === 0) {
        list.textContent = "No services available.";
        return;
      }
      services.forEach(svc => {
        const div = document.createElement('div');
        div.className = 'card mb-2';
        div.innerHTML = `
          <h3>${svc.title}</h3>
          <p>${svc.description}</p>
          <strong>Price: â‚¹${svc.price}</strong>
          <p style="font-size:0.95em;color:#2575fc;">
            By: ${svc.user_id?.name || 'Unknown'}
            ${svc.user_id?.email ? `<br><span style="color:#1f2937;font-size:0.95em;">Email: ${svc.user_id.email}</span>` : ''}
          </p>
          <a href="chat.html?user_id=${svc.user_id?.id || ''}" class="button-link" style="margin-top:8px;display:inline-block;">Contact</a>
        `;
        list.appendChild(div);
      });
    }

    loadServices();
  </script>
</body>
</html>